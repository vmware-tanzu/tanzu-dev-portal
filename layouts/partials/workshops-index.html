{{ define "workshopCard" }}
  {{/* if and (eq .context.Parent .parent) (not .context.Params.hidden) */}}
  {{ if not .Params.hidden }}
    <a href="{{ print `/get-workshop/` .Params.lab | relURL }}" class="col-12 workshop-box filter-item mb-3 mb-lg-4 flex-315 px-0 mr-lg-4 {{ range .Params.tags }}{{ . | lower }}{{ end }}">
      <div class="workshop-hero row align-items-center justify-content-center" style="background-color: #{{ .Params.color }};">
        <div class='thumbnail-gradient position-absolute'></div>
        <img src={{ .Params.logo | relURL }}>
      </div>
      <div class="description flex-grow-1 px-4 d-flex flex-column justify-content-between py-4 td-box-dark">
        <div>
          <h4 class="workshop-title link">{{- .Title -}}</h4>
          {{ if gt (len .Description) 90 }}
            <p class="workshop-text text-light">
              {{ print (substr .Description 0 90) "..." }}
            </p>
          {{ else }}
            <p class="workshop-text text-light">
              {{ .Description | markdownify }}
            </p>
          {{ end }}
          <h5 class="fs-80 opacity-4 mb-5">
            <i class="fa fa-hourglass-half mr-1"></i>
            <span>{{ .Params.length }} minutes</span>
          </h5>  
        </div>
        <div class="start-workshop d-flex justify-content-center mb-2">
          <div class="cta-btn-wrapper overflow-hidden d-flex justify-content-between align-items-center position-relative">
            <div class="solid-rect position-absolute"></div>
            <div class="cta-btn py-2 px-3  m-0 d-inline-block text-uppercase fs-80">Start workshop</div>
          </div>
        </div>
      </div>
    </a>
  {{ end }}
{{ end }}
<div class="container mb-4">
  <h2>Learn With Tanzu</h2>
</div>
<div class="d-flex container flex-wrap">
  <div id="workshops-index" class="section-index flex-1">
      <div class="row workshop-row mb-lg-5 mb-2">
        {{ range (where .Pages "Params.tags" "intersect" (slice "Tanzu")).ByWeight }}
          {{ template "workshopCard" . }}
        {{ end }}
      </div>
      <!-- <div class="col"> -->
      <div class="row">
        <!-- Groups content according to the "param_key" field in front matter -->
        {{ range .Pages.GroupByParam "level1" }}
          <!--
          <div class="col">
            -->
          <div class="row">
            <h2 class="mb-4">{{ .Key }}</h2>
          </div>
          <div class="row workshop-row mb-lg-5 mb-2" role="listbox">
            {{ range .Pages }}
              {{ template "workshopCard" . }}
            {{ end }}
          </div>
          <!--  </div> -->
          <!-- </div> -->
        {{ end }}
      </div>
  </div>
</div>