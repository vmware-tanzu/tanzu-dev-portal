{{ if or (strings.HasPrefix .Destination ".") (strings.HasPrefix .Destination "#") (strings.HasPrefix .Destination "mailto:") }}<a href="{{ .Destination | safeURL }}"{{ with .Title}} title="{{ . }}"{{ end }}>{{ .Text | safeHTML }}</a>{{ else if (and (not (or (strings.HasPrefix .Destination "/") (strings.HasPrefix .Destination "http"))) (or (eq .Page.File.BaseFileName "index") (eq .Page.File.BaseFileName "_index"))) }}<a href="{{ print .Page.Permalink .Destination | relURL | safeURL }}"{{ with .Title}} title="{{ . }}"{{ end }}>{{ .Text | safeHTML }}</a>{{ else }}<a href="{{ .Destination | safeURL | relURL }}"{{ with .Title}} title="{{ . }}"{{ end }}{{ if strings.HasPrefix .Destination "http" }} target="_blank" rel="nofollow"{{ end }}>{{ .Text | safeHTML }}</a>{{ end }}