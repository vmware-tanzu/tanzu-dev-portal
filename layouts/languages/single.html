<!doctype html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    {{ partial "head.html" . }}
  </head>
  <body id='{{ replaceRE "(\\s)" "" (lower .Title) }}'class="td-{{ .Kind }} py-3">
    {{ partial "amplitude.html" (dict "context" . "event" "language viewed") }}
    <header>
      {{ partial "navbar.html" . }}
    </header>
    
    <div class="container-fluid td-outer">
        {{ partial "live-notify.html" . }}
        <div class="td-main ">
            {{ $class := replace .Params.linkTitle "." "-" | lower }}
            {{ $class := replace $class " " "" }}
            <section id="hero" class="dotnet-hero td-box--gray-dark mt-6 pt-4 pb-2">
                <div class="container">
                    <h1 class="h1"> {{- .Params.herotitle | markdownify }}</h1>
                    <div class="lead col-7"><p>{{- .Content | markdownify }}</p></div>
                </div>
            </section>

                {{ if eq .Params.label "dotnet" }}
                <!-- .NET Steeltoe Banner -->
                        <div class="row pb-5">
                            <a href="https://steeltoe.io/" class="w-100 py-0">
                                <div class="col-12 text-center d-flex align-items-center justify-content-center steeltoe-banner">
                                    <img src='{{ "/images/languages/dotnet/steeltoe.png" | relURL }}' class="mx-2" style="width: 50px; height: 50px;"> 
                                    Get Started With Steeltoe
                                </div>
                            </a>
                        </div>
                {{ end }}

                <!-- Track what pieces of content are rendered so they're not shown in latest content -->
                {{ $rendered := slice }}

                <!-- Blog -->
                {{ $blogs := where (where .Site.Pages "Section" "blog") ".Params.languages" "intersect" (slice .Params.label) }}
                {{ if gt (len $blogs) 0 }}
                <div class="container px-0 mb-5 shows">
                    <div class="container px-0 mb-5 shows">
                        <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">Blogs</h2></div>
                        <div class='row d-flex justify-content-between mb-5'>
                        {{ range first 3 $blogs }}
                            {{ $rendered = $rendered | append . }}
                            <div class="td-box--gray-dark subtopic mr-0 mb-3 flex-315 transition-all">
                                <a class="linked-box td-box--gray-dark p-4 position-relative" href="{{ .RelPermalink }}">
                                    <h2 class="link mt-3 h4 pt-0">{{ .Title }}</h2>
                                    <div class="card-type-id">
                                        <!-- <i class="fas fa-book"></i> -->
                                        <img alt="" class="d-inline-block" src='{{ "/images/icons/icon-blog-label.svg" | relURL }}'>
                                        <span class="h5">Blog</span>
                                    </div>
                                    <p>{{ .Description }}</p>
                                </a>
                            </div>
                        {{ end }}
                    </div>
                </div>
                {{ end }}

                <!-- Guides -->
                {{ $guides := where (where .Site.Pages "Section" "guide") ".Params.languages" "intersect" (slice .Params.label) }}
                {{ if gt (len $guides) 0 }}
                <div class='container py-3 py-lg-5'>
                    <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">Guides</h2></div>
                    <div class='row'>
                        {{ range first 3 $guides }}
                            {{ $rendered = $rendered | append . }}
                            {{ partial (printf "%v-card.html" .Section) . }}
                        {{ end }}
                    </div>
                </div>
                {{ end }}
               
                <!-- Optional Show -->
                {{ if .Params.show }}
                    {{ $langeps := slice }}
                    {{ $alleps := where .Site.Pages "Section" "tv" }}
                    {{ $id := .Params.show }}
                    {{ range $alleps }}
                        {{ if eq .Parent.Params.id $id }}
                            {{ $langeps = $langeps | append . }}
                        {{ end }}
                    {{ end }}

                    <!-- Show soonest episode fist -->
                    {{ $upcoming := slice }}
                    {{ $previous := slice }}
                    {{ range $langeps }}
                        {{ if gt .Params.Date.Unix now.Unix }}
                            {{ $upcoming = $upcoming | append . }}
                        {{ else }}
                            {{ $previous = $previous | append .}}
                        {{ end }}
                    {{ end }}

                    {{ $eps := slice }}
                    {{ range $upcoming.ByDate }}
                        {{ $eps = $eps | append . }}
                    {{ end }}
                    {{ range $previous }}
                        {{ $eps = $eps | append . }}
                    {{ end }}
                    {{ $showtitle := (index $langeps 0).Parent.Title }}

                    <div class="container px-0 mb-5 shows">
                        <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">{{ $showtitle }}</h2></div>
                        <div class='row d-flex justify-content-between mb-5 episodes'>
                            {{ range first 3 $eps }}
                                {{ $rendered = $rendered | append . }}
                                {{ partial "episode-card.html" . }}
                            {{ end }}
                        </div>
                    </div>
                {{ end }}

                <!-- Optional Event -->
                {{ if .Params.event }}
                    {{ $eps := slice }}
                    {{ $alleps := where .Site.Pages "Section" "tv" }}
                    {{ $id := .Params.event }}
                    {{ range $alleps }}
                        {{ if eq .Parent.Params.id $id }}
                            {{ $eps = $eps | append . }}
                        {{ end }}
                    {{ end }}

                    {{ $showtitle := (index $eps 0).Parent.Title }}

                    <div class="container px-0 mb-5 shows">
                        <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">{{ $showtitle }}</h2></div>
                        <div class='row d-flex justify-content-between mb-5 episodes'>
                            {{ range first 3 $eps }}
                                {{ $rendered = $rendered | append . }}
                                {{ partial "episode-card.html" . }}
                            {{ end }}
                        </div>
                    </div>
                {{ end }}

                <!-- Videos -->
                {{ $videos := where (where .Site.Pages "Section" "videos") ".Params.languages" "intersect" (slice .Params.label) }}
                {{ if gt (len $videos) 0 }}
                <div class='container py-3 py-lg-5'>
                    <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">Videos</h2></div>
                    <div class='row'>
                        {{ range first 3 $videos }}
                            {{ $rendered = $rendered | append . }}
                            {{ partial (printf "%v-card.html" .Section) . }}
                        {{ end }}
                    </div>
                </div>
                {{ end }}

                <!-- Getting Started -->
                {{ $gettingstarted := where (where .Site.Pages "Params.languages" "intersect" (slice .Params.label)) "Params.langgettingstarted" true }}
                {{ if gt (len $gettingstarted) 0 }}
                <div class='container py-3 py-lg-5'>
                    <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">Getting Started</h2></div>
                    <div class='row'>
                        {{ range first 3 $gettingstarted }}
                            {{ $rendered = $rendered | append . }}
                            {{ partial (printf "%v-card.html" .Section) . }}
                        {{ end }}
                    </div>
                </div>
                {{ end }}


                <!-- Latest Content -->
                {{ $latest := where .Site.Pages "Params.languages" "intersect" (slice .Params.label) }}
                {{ $showlatest := slice }}
                {{ range $latest }}
                    {{ if not (in $rendered .) }}
                        {{ $showlatest = $showlatest | append . }}
                    {{ end }}
                {{ end }}
                {{ if ge (len $showlatest) 3 }}
                <div class='container py-3 py-lg-5'>
                    <div class='d-flex align-items-center icon-title mb-4'><h2 class="mb-0">Latest Content</h2></div>
                    <div class='row'>
                        {{ range first 3 $latest.ByDate }}
                            {{ partial (printf "%v-card.html" .Section) . }}
                        {{ end }}
                    </div>
                </div>
                {{ end }}
                
            </section>
      </div>
      {{ partial "footer.html" . }}
    </div>
    {{ partial "scripts.html" . }}
  </body>
  <script>
    $( ".show-all-button" ).click(function() {
        $(this).parent().parent().find(".hidden-item:first").show( 20, function showNext() {
            $(this).next( ".hidden-item" ).show( 20, showNext );
        });
        $(this).parent().hide();
    });
  </script>

</html>

