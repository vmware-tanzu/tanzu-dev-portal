# Generate a Netlify _redirects file so that aliases redirect via a 301 instead of a meta refresh

{{ printf "\n" }}

{{- range $p := .Site.Pages -}}
    {{- range .Aliases -}}
        {{ $from := . }}
        {{ if not (hasPrefix $from "/") }}
            {{ $from = print "/" $from }}
        {{ end }}
        {{ $to := $p.RelPermalink }}
        {{ if not (hasPrefix $to "/") }}
            {{ $to = print "/" $to }}
        {{ end }}
        {{- printf "%s %s 301\n" $from $to -}}
    {{- end -}}
{{- end -}}
